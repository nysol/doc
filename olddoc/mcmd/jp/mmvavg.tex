
%\documentclass[a4paper]{jsbook}
%\usepackage{mcmd_jp}
%\begin{document}

\section{mmvavg 移動平均の算出\label{sect:mmvavg}}
\index{mmvavg@mmvavg}

移動平均(moving average)を算出する。
移動平均としては、単純移動平均($SMA$)、線形荷重移動平均($WMA$)、指数平滑移動平均($EMA$)の３種類の移動平均が計算可能である。

\if0 #no help# following sentences will not apear on the help document. \fi
ある時$t$における値を$x_t$で表したとき、$m$期の各種移動平均は式(\ref{eq:sma},\ref{eq:wma},\ref{eq:ema})で定義される。

\begin{eqnarray}
%\begin{footnotesize}
SMA_t=\frac{1}{m} \sum_{i=0}^{m-1} x_{t-i}
\label{eq:sma}
%\end{footnotesize}
\end{eqnarray}

\begin{eqnarray}
%\begin{footnotesize}
WMA_t=\sum_{i=0}^{m-1} \frac{m-i}{S} x_{t-i},\ \ S=\sum_{i=1}^m i
\label{eq:wma}
%\end{footnotesize}
\end{eqnarray}

\begin{eqnarray}
%\begin{footnotesize}
EMA_t=\alpha x_t + (1-\alpha)EMA_{t-1}
\label{eq:ema}
%\end{footnotesize}
\end{eqnarray}

\subsection*{書式}
\verb/mmvavg [s=] [k=] [-n] f= [t=] [-exp|-w] [alpha=] [skip=]/
\hyperref[sect:option_i]{[i=]}
\hyperref[sect:option_o]{[o=]}
\hyperref[sect:option_assert_diffSize]{[-assert\_diffSize]}
\hyperref[sect:option_assert_nullkey]{[-assert\_nullkey]}
\hyperref[sect:option_assert_nullin]{[-assert\_nullin]}
\hyperref[sect:option_assert_nullout]{[-assert\_nullout]}
\hyperref[sect:option_nfn]{[-nfn]} 
\hyperref[sect:option_nfno]{[-nfno]}  
\hyperref[sect:option_x]{[-x]}
\hyperref[sect:option_q]{[-q]}
\hyperref[sect:option_option_tmppath]{[tmpPath=]}
\hyperref[sect:option_precision]{[precision=]}
\verb|[-params]|
\verb|[--help]|
\verb|[--helpl]|
\verb|[--version]|\\

\subsection*{パラメータ}
\begin{table}[htbp]
%\begin{center}
{\small
\begin{tabular}{ll}
\verb|i=|    & 入力ファイル名を指定する。\\
\verb|o=|    & 出力ファイル名を指定する。\\
\verb|s=|    & ここで指定した項目(複数項目指定可)で並べ替えられた後、移動平均が計算される。\\
             & \verb|-q|オプションを指定しないとき、\verb|s=|パラメータは必須。\\
\verb|k=|    & ここで指定された項目(複数項目指定可)を単位として集計する。 \\
\verb|f=|    & 移動平均を求める項目名リスト(複数項目指定可)を指定する。\\
\verb|t=|    & 期間数を1以上の整数で指定する。 \\
             & \verb|-exp|指定時に\verb|alpha=|を指定すれば\verb|t=|は指定できない。\\
\verb|-w|    & 線形加重移動平均を求める。\\
\verb|-exp|  & 指数平滑移動平均を求める。\\
\verb|alpha=|& \verb|-exp|が指定された時の平滑化係数を実数値で与える。\\
             & 省略時は\verb|alpha=2/(t=の値+1)|。\\
\verb|skip=| & 出力を抑制する最初の行数。\\
             & デフォルト値: \verb|skip=(t=の値-1)|, \verb|-exp|が指定された場合は\verb|skip=0| \\
\verb|-n| & 期間内にNULL値が1つでも含まれていると結果もNULL値とする。 \\
\end{tabular} 
}
\end{table} 


\subsection*{利用例}
\input{examples/tex/mmvavg_ex.tex}
\subsection*{関連コマンド}
\hyperref[sect:mmvstats] {mmvstats} : 平均だけでなく、各種統計量を指定可能。

\hyperref[sect:mmvsim] {mmvsim} : 2変量の統計量を計算する。

\hyperref[sect:mwindow] {mwindow} : 動窓のデータを作成するので、そのデータを使えば\verb|mmvstats|で計算できない統計量も計算可能。

%\end{document}
